{"version":2,"kind":"Notebook","sha256":"5d435f5264ce8c5bb7f2d8a594651064abcf1d352f8c119b432c79b714ac07a1","slug":"notebooks.foundations.unstructured-grids","location":"/notebooks/01-foundations/unstructured-grids.ipynb","dependencies":[],"frontmatter":{"title":"Unstructured Grids Overview","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"The Project Pythia Community","given":"The Project Pythia","family":"Community"},"name":"The Project Pythia Community","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/unstructured-grid-viz-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/unstructured-grid-viz-cookbook/blob/main/notebooks/01-foundations/unstructured-grids.ipynb","thumbnail":"/unstructured-grid-viz-cookbook/build/e272ded17428f993075a0c5879925b99.svg","exports":[{"format":"ipynb","filename":"unstructured-grids.ipynb","url":"/unstructured-grid-viz-cookbook/build/unstructured-grids-f6c6d014e99bce47544609e7930e9cf9.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":474.08,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"image","url":"/unstructured-grid-viz-cookbook/build/e272ded17428f993075a0c5879925b99.svg","alt":"UXarray logo","width":"30%","key":"tW3ZrsNA4P","urlSource":"https://raw.githubusercontent.com/UXARRAY/uxarray/main/docs/_static/images/logos/uxarray_logo_h_dark.svg"}],"key":"ARfDzFN8ZG"},{"type":"heading","depth":1,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Unstructured Grids Overview","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"HLnrEVUTW9"}],"identifier":"unstructured-grids-overview","label":"Unstructured Grids Overview","html_id":"unstructured-grids-overview","implicit":true,"key":"hTgliy8ZnT"},{"type":"heading","depth":3,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"In this section, you’ll learn:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"axCj6Ig2CB"}],"identifier":"in-this-section-youll-learn","label":"In this section, you’ll learn:","html_id":"in-this-section-youll-learn","implicit":true,"key":"w8Xl43Tdwl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"What unstructured meshes are and how they are different than structured grids","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VdqVNH8ZjZ"}],"key":"CeVBjpMYgu"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Grid terminology and conventions","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eT7qszRkNz"}],"key":"N5CMI2gDNQ"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Unstructured grid formats","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mQ2i77kOsj"}],"key":"DmrIO7bEHK"}],"key":"EJb37cu5RH"},{"type":"heading","depth":3,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Related Documentation","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ZaAQdj9efu"}],"identifier":"related-documentation","label":"Related Documentation","html_id":"related-documentation","implicit":true,"key":"NdAE5U9HDM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"link","url":"https://uxarray.readthedocs.io/en/latest/user-guide/terminology.html","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"UXarray Terminology Documentation","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"xG9qt6FvcS"}],"urlSource":"https://uxarray.readthedocs.io/en/latest/user-guide/terminology.html","key":"C0ObegmFcc"}],"key":"HFp5JclL66"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"link","url":"https://uxarray.readthedocs.io/en/latest/user-guide/representation.html","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"UXarray Conventions Documentation","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"CwOjwfZIqN"}],"urlSource":"https://uxarray.readthedocs.io/en/latest/user-guide/representation.html","key":"nkMVsgfgxV"}],"key":"NKMwBQSCy7"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"link","url":"https://uxarray.readthedocs.io/en/latest/user-guide/grid-formats.html","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"UXarray Supported Models and Grid Formats Documentation","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"mCapIAG5Hd"}],"urlSource":"https://uxarray.readthedocs.io/en/latest/user-guide/grid-formats.html","key":"ORWHVKkFGD"}],"key":"CJI4ZRuQdS"}],"key":"wVzWLgwPIP"},{"type":"heading","depth":3,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"oIuIrQVu7V"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"rpCVSERLno"},{"type":"table","position":{"start":{"line":24,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"f4U3fQrDG6"}],"key":"jp842QYFj9"},{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"JCV5OEKTpB"}],"key":"ywp1aaDGEs"},{"type":"tableCell","header":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"b6OzdLT8lR"}],"key":"qxNhsnsmCT"}],"key":"OTKPw1wqWx"},{"type":"tableRow","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"link","url":"https://cfconventions.org/","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"CF Conventions","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"Z2SIKDEoBV"}],"urlSource":"https://cfconventions.org/","key":"ZMD9mzlT0o"}],"key":"lyyj01tWPJ"},{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"T6mdJLRvQ5"}],"key":"EqPzk2rtUH"},{"type":"tableCell","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[],"key":"HNTZmge4X1"}],"key":"fIG0LD9Pfr"},{"type":"tableRow","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"link","url":"https://ugrid-conventions.github.io/ugrid-conventions/","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"UGRID Conventions","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"vRkjjdHzg6"}],"urlSource":"https://ugrid-conventions.github.io/ugrid-conventions/","key":"jSUt9nE70m"}],"key":"a5CxQoswuN"},{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"PvKUHHTUfW"}],"key":"BL4E4LvCEI"},{"type":"tableCell","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[],"key":"u4UKhvssrM"}],"key":"NvEmqDF8pp"},{"type":"tableRow","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"link","url":"https://numpy.org/","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Numpy","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"w8VQcHJQ5n"}],"urlSource":"https://numpy.org/","key":"rxyztMtoq5"}],"key":"IjBBfHnUCb"},{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"MVvpumzXjM"}],"key":"J9lzBmJqZs"},{"type":"tableCell","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[],"key":"mzWUfiJgW6"}],"key":"YV9NWmM2nt"},{"type":"tableRow","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"link","url":"https://docs.xarray.dev/en/stable/","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Xarray","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"KSV9idVNfq"}],"urlSource":"https://docs.xarray.dev/en/stable/","key":"uxQxegov1e"}],"key":"em3MD1VNS4"},{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"LD7eCdiSTQ"}],"key":"rXgJRCNnY6"},{"type":"tableCell","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[],"key":"LSo5flSfqo"}],"key":"AK0TJRSOyh"}],"key":"rGIhJdhaQH"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"vxqt90Aq00"}],"key":"LrBgsKZDrL"},{"type":"text","value":": 15 minutes","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"q9qFVRdlqV"}],"key":"EhOhaCNX2t"},{"type":"thematicBreak","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"vWrSw5Kwgp"}],"key":"IHboWMEXvu"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":50.816,"visible":true,"width":100}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Structured vs Unstructured Grids","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KNSVAzsVPv"}],"identifier":"structured-vs-unstructured-grids","label":"Structured vs Unstructured Grids","html_id":"structured-vs-unstructured-grids","implicit":true,"key":"A7nZ0ugUO2"}],"key":"zom7szDaJt"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":160.799,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Before diving into unstructured grids, it is helpful to understand the basic differences between structured and unstructured grids:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OmzgExTDlX"}],"key":"sciJF40bCn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A structured grid is composed of grid cells (faces) that are well-organized in a predictable, grid-like topology, where simple indexing can be used to identify neighboring cells,","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ICe6DKII1P"}],"key":"tYnLyWNKWt"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"An unstructured grid represents the globe as a tesselation of various polygons (e.g. triangles, hexagons, etc.) to represent complex geometries, allowing those elements to be joined in any manner, but requiring explicit information to identify neighboring elements such as cells and nodes (vertices).","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zNc6axVGzR"}],"key":"kjkXK4E5Aw"}],"key":"unSk3AwZN9"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Note that the focus here is on the horizontally unstructured grids in the climate and weather context, which may or may not involve vertical levels, but the same concepts apply to three dimensional unstructured grids as well.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KeqDS0xMXd"}],"key":"rGhJ8mEtKr"}],"key":"rp9QP17JVe"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Examples of structured grids (on left) and unstructured grids (center and right) can be seen below:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tbxfcpe5ZS"}],"key":"tLqgQiSat5"}],"key":"vTCpCZOGG4"},{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/unstructured-grid-viz-cookbook/build/grids-2f589261c3dc667043e382384019f09a.png","title":"Structured Lat-Lon Grid","alt":"Alt text","width":1200,"key":"GGPmfS2gYz","urlSource":"../../_static/images/grids.png"}],"key":"nFDn2QwIRf"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":44.0799,"visible":true,"width":100}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Structured Grids","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LoAXBTSgBL"}],"identifier":"structured-grids","label":"Structured Grids","html_id":"structured-grids","implicit":true,"key":"BEsuUGRQz9"}],"key":"iUbE7Xv2Zl"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":196.788,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A few advantages of structured grids are:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ORPvCxNnHO"}],"key":"XZtoEimcpE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Uniform Representation: Simplifies numerical methods and enhances result interpretation.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OZrzi5LVmX"}],"key":"mfmczLjFLq"}],"key":"jj7D308v0x"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Efficient Numerics: Well-suited for finite-difference schemes, ensuring computational efficiency.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZF8FJbVNlH"}],"key":"QmRIhZGNn5"}],"key":"Gz3bXtyXW6"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Simplified Interpolation: Straightforward interpolation facilitates integration of observational data and model outputs.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yXQArn0Krn"}],"key":"BJO8iXpt9q"}],"key":"WvJraOVffe"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Boundary Handling: Ideal for regular boundaries, easing implementation of boundary conditions.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VK437Uv8U0"}],"key":"sEVs5AXv07"}],"key":"roCap9A5qG"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Optimized Parallel Computing: Regular structure supports efficient parallel computing for scalability.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"hz2mSx03lR"}],"key":"enViKTIE2W"}],"key":"imEcrQRFK1"}],"key":"c3wMCWa13b"}],"key":"WnpKVNokSR"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":43.2118,"visible":true,"width":100}},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sample Xarray Code to Generate a Basic Structured Grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MtgbGKdgvw"}],"identifier":"sample-xarray-code-to-generate-a-basic-structured-grid","label":"Sample Xarray Code to Generate a Basic Structured Grid","html_id":"sample-xarray-code-to-generate-a-basic-structured-grid","implicit":true,"key":"eY5NRjSnyu"}],"key":"QQruo5zssO"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":148.802,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The code below shows the creation of a structured grid example over 2D Earth geometry and plots random temperature data over it. There are several ways and tools to create a structured grid, but this code works as follows:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JpPywRl0g4"}],"key":"Zf97unnmqA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Given the number of points in longitude and latitude directions, the code uses Numpy’s meshgrid to generate a structured grid. The temperature data is then interpolated onto this grid, creating a smooth representation. Xarray is leveraged to organize the gridded data into a dataset, facilitating easy manipulation and visualization. The resulting plot showcases the data on this structured grid, providing a clearer understanding of temperature variations across defined longitude and latitude ranges. Plotting the structured grid and the temperature data is done using Matplotlib along with Cartopy, a cartographic plotting library.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z4aV3okdGH"}],"key":"i5MTqgIbsh"}],"key":"DsQzbmYRod"},{"type":"block","kind":"notebook-code","data":{"panel-layout":{"height":700.99,"visible":true,"width":100}},"children":[{"type":"code","lang":"python","executable":true,"value":"import cartopy.crs as ccrs\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport xarray as xr\n\n# Define the global domain\nlat_range = [-90.0, 90.0]\nlon_range = [-180.0, 180.0]\n\n# Create a structured grid. Note the number of points in each dimension\n# There is not need to store the grid points in a separate array\n# Also note that the grid points are evenly spaced and not connectivity information is needed\n\nnum_lat_points = 20\nnum_lon_points = 30\n\nlats = np.linspace(lat_range[0], lat_range[1], num_lat_points)\nlons = np.linspace(lon_range[0], lon_range[1], num_lon_points)\n\nlons_grid, lats_grid = np.meshgrid(lons, lats)\n\n# Generate random temperature data for each grid point\ntemperature_data = np.random.uniform(\n    low=20, high=30, size=(num_lat_points, num_lon_points)\n)\n\n# Create xarray Dataset\nds = xr.Dataset()\nds[\"temperature\"] = ([\"lat\", \"lon\"], temperature_data)\nds[\"lon\"] = lons\nds[\"lat\"] = lats\n\n# Plot the structured grid using xarray\nfig, ax = plt.subplots(subplot_kw={\"projection\": ccrs.PlateCarree()})\nax.set_global()\n\n# Plot world map lines\nax.coastlines()\nax.gridlines(draw_labels=True, dms=True, x_inline=False, y_inline=False)\n\n# Plot the structured grid\ncs = ax.pcolormesh(\n    ds[\"lon\"], ds[\"lat\"], ds[\"temperature\"], cmap=\"coolwarm\", shading=\"auto\"\n)\n\n# Colorbar\ncbar = plt.colorbar(cs, ax=ax, label=\"Temperature (°C)\")\n\nax.set_title(\"Structured Grid Example\")\nplt.show()","key":"hP7NW7MQRv"},{"type":"output","id":"9ANYdihe5C0eIVKMx0N26","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/unstructured-grid-viz-cookbook-dev/lib/python3.13/site-packages/cartopy/io/__init__.py:241: DownloadWarning: Downloading: https://naturalearth.s3.amazonaws.com/110m_physical/ne_110m_coastline.zip\n  warnings.warn(f'Downloading: {url}', DownloadWarning)\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"b88085344d2e2bd312b8204def104bf8","path":"/unstructured-grid-viz-cookbook/build/b88085344d2e2bd312b8204def104bf8.png"}}}],"key":"S7csDp2Fmj"}],"key":"wl23teMV00"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":44.0799,"visible":true,"width":100}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Unstructured Grids","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"s6qbV6Y5DT"}],"identifier":"unstructured-grids","label":"Unstructured Grids","html_id":"unstructured-grids","implicit":true,"key":"Wwvm5iao53"}],"key":"YyI8GdNC90"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":51.1285,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Characteristic features of unstructured grids are:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fuIGNOsbSJ"}],"key":"Hl5caMzkYf"}],"key":"UU2XpHLfuv"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":196.788,"visible":true,"width":100}},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Adaptability to complex geometries: Fits intricate shapes and boundaries","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bv54eeOwYt"}],"key":"RTyrRBYb4U"}],"key":"zfdXTyhkTA"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Often runs faster than structured grids: Requires fewer elements to achieve similar accuracy","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lmiBW6RuN8"}],"key":"QDvK0Gj1cC"}],"key":"RxkNlrnaQ6"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Local refinement: Concentrates resolution on areas of interest","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"c6lQ74pWq0"}],"key":"lpzVFPLAz1"}],"key":"hmaUS1bhVr"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Flexibility in element types: Accommodates various element shapes","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"na54y8C4XS"}],"key":"W6WxkhomrP"}],"key":"VOGbdxEfDv"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Efficient parallelization: Scales well to multiple processors","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"RA5mLvLkPZ"}],"key":"ZbdEzC6x6G"}],"key":"WbWlcOqvav"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Suitability for dynamic simulations: Adapts to changing conditions","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"EUZg0ynmHg"}],"key":"GaOVN9g6Uf"}],"key":"LYprV0P4yC"}],"key":"ICrzaAj7xN"}],"key":"UZqVSLiHb0"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":43.2118,"visible":true,"width":100}},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sample Xarray Code to Generate a Basic Unstructured Mesh","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u5tNaFJWdi"}],"identifier":"sample-xarray-code-to-generate-a-basic-unstructured-mesh","label":"Sample Xarray Code to Generate a Basic Unstructured Mesh","html_id":"sample-xarray-code-to-generate-a-basic-unstructured-mesh","implicit":true,"key":"jZdHWOjHDx"}],"key":"iiGJY2kG8C"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":97.3958,"visible":true,"width":100}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The code below uses a very basic, standard Python approach to showcase a simple unstructured mesh topology (without a real meaning or value).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"N0n1gV7vIp"}],"key":"rUuIjYTig1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This code generates an unstructured grid out of 600 arbitrarily created nodes (latitude, longitude pairs sampled from corresponding ranges via a uniform distribution). It performs Delaunay triangulation of those nodes using matplotlib.tri.Triangulation to create grid cells. The resulting triangulation is then plotted using cartopy and matplotlib.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VVccX9teLg"}],"key":"AuSh3VwBz9"}],"key":"CkBkIyvq69"},{"type":"block","kind":"notebook-code","data":{"panel-layout":{"height":700.99,"visible":true,"width":100}},"children":[{"type":"code","lang":"python","executable":true,"value":"import cartopy.crs as ccrs\nimport matplotlib.pyplot as plt\nimport matplotlib.tri as mtri\nimport numpy as np\nimport xarray as xr\n\n# Generate random temperature data\nnp.random.seed(42)\nnum_points = 600\nlatitudes = np.random.uniform(low=-90, high=90, size=num_points)\nlongitudes = np.random.uniform(low=-180, high=180, size=num_points)\ntemperatures = np.random.uniform(low=-30, high=30, size=num_points)\n\n# Create xarray DataArray for temperature data\ntemperature_data = xr.DataArray(\n    temperatures, dims=\"points\", coords={\"points\": range(num_points)}\n)\n\n# Perform Delaunay triangulation\ntriang = mtri.Triangulation(longitudes, latitudes)\n\n# Create xarray DataArray for triangulation coordinates\ntriang_data = xr.DataArray(\n    np.column_stack([triang.x, triang.y]), dims=(\"points\", \"coords\")\n)\n\n# Plot the globe with unstructured mesh using xarray\nfig, ax = plt.subplots(subplot_kw={\"projection\": ccrs.PlateCarree()})\nax.set_global()\n\n# Plot world map lines with prominent gridlines\nax.coastlines(linewidth=0.5)\n# ax.gridlines(draw_labels=True, dms=True, x_inline=False, y_inline=False, linewidth=0.5)\n\n# Plot unstructured mesh with bold lines\nax.triplot(\n    triang, \"ko-\", markersize=0.1, linewidth=0.5, alpha=0.5\n)  # Increase linewidth to see the triangles\n\n# Scatter plot with temperature data\nsc = ax.scatter(\n    longitudes,\n    latitudes,\n    c=temperature_data,\n    cmap=\"coolwarm\",\n    s=10,\n    transform=ccrs.PlateCarree(),\n)\n\n# Colorbar\ncbar = plt.colorbar(sc, ax=ax, label=\"Temperature (°C)\")\n\nax.set_title(\"Unstructured Mesh Example\")\nplt.show()","key":"sroJT6splc"},{"type":"output","id":"tn6vZzIenV5vBhKSEZ-M-","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"47d725474d8f3f7a6595fb6f3b184420","path":"/unstructured-grid-viz-cookbook/build/47d725474d8f3f7a6595fb6f3b184420.png"}}}],"key":"oUf5QcEKzG"}],"key":"bdAMSaJPNk"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":85.3993,"visible":true,"width":100}},"children":[{"type":"div","class":"admonition alert alert-info","children":[{"type":"paragraph","children":[{"type":"text","value":"Note:","key":"TwbzaOSBM2"}],"key":"vQefEUXnuw"},{"type":"text","value":"This is a very basic example to show how an unstructured grid with triangles would look like. In actual model outputs, often the region of interest is meshed with a finer resolution, while it is coarsened in areas where high resolution is not needed. This is done to reduce the number of elements and improve computational efficiency.","key":"RNvccED9Q0"}],"key":"eHqtnEYHDZ"}],"key":"sd4VJtAXZk"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why Unstructured Grids?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PiPeHbE6oA"}],"identifier":"why-unstructured-grids","label":"Why Unstructured Grids?","html_id":"why-unstructured-grids","implicit":true,"key":"BSH2sb3YoH"}],"key":"KDH8pAve6F"},{"type":"block","kind":"notebook-content","data":{"jp-MarkdownHeadingCollapsed":true},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Arrival of the next generation, kilometer-scale global models for weather and climate","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hzpPX414sm"}],"identifier":"arrival-of-the-next-generation-kilometer-scale-global-models-for-weather-and-climate","label":"Arrival of the next generation, kilometer-scale global models for weather and climate","html_id":"arrival-of-the-next-generation-kilometer-scale-global-models-for-weather-and-climate","implicit":true,"key":"kdSFXEpB4L"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The aforementioned features and strengths of unstructured grids make them appealing for data analysis and visualization of kilometer-scale global weather and climate model outputs that produce very large spatio-temporal datasets.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Jbdip9PaKn"}],"key":"xHvKRmgTvU"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Therefore, after nearly two decades of development and evaluation, the climate and global weather modeling communities are transitioning from simple structured grids to this kind of more complex, but more scalable unstructured grids upon which governing equations of state are solved.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"egCsHMrkPk"}],"key":"kvRqyWU9Zy"}],"key":"zWOXra10Rl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Many Unstructured Grid Types, No Commonly Used Convention or Tools","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ayuGOPmMIV"}],"identifier":"many-unstructured-grid-types-no-commonly-used-convention-or-tools","label":"Many Unstructured Grid Types, No Commonly Used Convention or Tools","html_id":"many-unstructured-grid-types-no-commonly-used-convention-or-tools","implicit":true,"key":"uMYQrV2Y7v"}],"key":"s1pRoCMagV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"There are several climate and weather models that generate unstructured grids that vary from each other regarding not only the geometric elements (shape of grid faces, i.e. polygons, etc.) but also the file formats and extensions, and how special information such as geometric elements’ connectivity is represented. This creates a challenge towards having a widely used convention for the representation of unstructured grid data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T2odhyiuTr"}],"key":"XBD2cOewKe"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"There are only a few analysis tools that are capable of working directly with unstructured mesh data that come from so many mesh formats, and most of the time, the common practice is to resample to structured grids, but this has myriad pitfalls.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"c0jyCmC8Wx"}],"key":"oNXNBbuVTQ"}],"key":"WglGxIixFA"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":305.451,"visible":true,"width":100}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Why UXarray for Unstructured Grids?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LeoohXZFlH"}],"identifier":"why-uxarray-for-unstructured-grids","label":"Why UXarray for Unstructured Grids?","html_id":"why-uxarray-for-unstructured-grids","implicit":true,"key":"QiiH2WT1Xo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"UXarray, which stands for “Unstructured Grids - Xarray”, is a Python package that provides Xarray-styled analysis and visualization functionality for working ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kJbN6sGIVV"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"directly","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xqVdmhcJlc"}],"key":"mpiSEgDWAb"},{"type":"text","value":" with unstructured grids that are resulting from most of the climate and weather models. Offering a unified representation of various model outputs around the UGRID conventions, UXarray enables working with native unstructured grids in a single, grid format-agnostic interface.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PXY04J7yee"}],"key":"GXgCLsXZPj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"More on UXarray in the next chapter.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oD9JD0tZ2H"}],"key":"Fmjfs6ALOo"}],"key":"ZpBq5sCl2x"},{"type":"block","kind":"notebook-content","data":{"panel-layout":{"height":84.3924,"visible":true,"width":100}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What is next?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rgumJuWaLr"}],"identifier":"what-is-next","label":"What is next?","html_id":"what-is-next","implicit":true,"key":"EJjezoohTz"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The next section will provide an overview of the general-purpose plotting libraries available in the scientific Python ecosystem.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"o7NBId6duP"}],"key":"ArUrMkxnyr"}],"key":"oY7OGzeIHr"}],"key":"C9zxCNNfF8"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to Cite This Cookbook","url":"/notebooks/how-to-cite","group":"Preamble"},"next":{"title":"Plotting Libraries","url":"/notebooks/foundations/plotting-libs","group":"Foundations"}}},"domain":"http://localhost:3000"}